<!DOCTYPE html>
<html>
<head>
    <title>ê²½ì°°ì²­</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; box-sizing: border-box; }
        header, footer { background-color: #2c3e50; color: white; text-align: center; padding: 10px; }
        nav { background-color: #34495e; padding: 10px; }
        nav a { color: white; padding: 14px 20px; text-decoration: none; display: inline-block; }
        nav a:hover { background-color: #2c3e50; color: white; }
        .container { padding: 20px; }
        header img { max-width: 100%; height: auto; }
        h2 { color: #2c3e50; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background-color: #3498db; color: white; }
        form {
            margin-top: 20px;
            text-align: right; /* Align the form to the right */
        }

        button {
            background-color: #e74c3c;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #c0392b;
        }

        .flag {
            background-color: #27ae60;
            color: white;
            padding: 10px;
            margin-bottom: 20px;
        }

        .search-bar {
            margin-top: 10px;
            text-align: center;
        }

        .search-input {
            padding: 5px;
            width: 200px;
        }
    </style>
</head>
<body>
    <header>
        <img src="{{ url_for('static', filename='img/txt_kcc.png') }}" alt="Logo">
    </header>

    <nav>
        <a href="/admin">í™ˆ</a>
        <a href="/board">ê²Œì‹œíŒ</a>
    </nav>

    <div class="container">
        {% block content %}
            <h2>ê²Œì‹œíŒ</h2>

            {% if session.get('logged_in') %}
                <div class="flag">
                    <p>ğŸš© ë‹¹ì‹ ì€ ë³´ì•ˆ ì»¨ì„¤íŒ… íŠ¸ë™ ê²½ì—°ë‹¨ê³„ êµìœ¡ìƒ 8ì¸ì˜ ê°œì¸ì •ë³´ë¥¼ ì§€ì¼°ìŠµë‹ˆë‹¤! ğŸš©</p>
                </div>
            {% endif %}

            <form action="/flushdb" method="get">
                <button type="submit">ê³ ê° ê°œì¸ì •ë³´ ì•ˆì „í•˜ê²Œ ì‚­ì œí•˜ê¸°</button>
            </form>

            <div class="search-bar">
                <label for="search">ê²€ìƒ‰:</label>
                <input type="text" id="search" class="search-input" onkeyup="filterTable()" placeholder="ì œëª© ë˜ëŠ” ëŒ€ìƒìë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”.">
            </div>

            <table id="postTable">
                <tr>
                    <th>ì œëª©</th>
                    <th>ëŒ€ìƒì</th>
                    <th>ì „í™”ë²ˆí˜¸</th>
                    <th>íŠ¹ì§•</th>
                    <th>ì‘ì„±ì¼</th>
                </tr>
                {% for post in posts %}
                    <tr>
                        <td>{{ post.title }}</td>
                        <td>{{ post.subject }}</td>
                        <td>{{ post.phone}}</td>
                        <td>{{ post.character}}</td>
                        <td>{{ post.date_posted }}</td>
                    </tr>
                {% endfor %}
            </table>
        {% endblock %}
    </div>

    <footer>
        <p>Â© 2024. KOREAN NATIONAL VOICE SCAM AGENCY</p>
    </footer>

<script>
    function filterTable() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("search");
        filter = input.value.toUpperCase();
        table = document.getElementById("postTable");
        tr = table.getElementsByTagName("tr");

        for (i = 0; i < tr.length; i++) {
            // Column indices for title and subject
            tdTitle = tr[i].getElementsByTagName("td")[0];
            tdSubject = tr[i].getElementsByTagName("td")[1];

            if (tdTitle || tdSubject) {
                txtValueTitle = tdTitle.textContent || tdTitle.innerText;
                txtValueSubject = tdSubject.textContent || tdSubject.innerText;

                // Check if either title or subject contains the filter text
                if (txtValueTitle.toUpperCase().indexOf(filter) > -1 || txtValueSubject.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
</script>
</body>
</html>
